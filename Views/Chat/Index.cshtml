@model List<Zela.ViewModels.FriendViewModel>
@{
    ViewData["Title"] = "Zela Chat – 1-1";
}

@section Styles {
    <link rel="stylesheet" href="~/css/chat-window.css" />
}

<section class="chat-window">
    <div class="friend-list">
        <ul class="friend-items" id="friend-list">
            @foreach (var f in Model)
            {
                <li class="friend-item" data-id="@f.UserId">
                    <img class="friend-avatar" src="@f.AvatarUrl" alt="Avatar"/>
                    <div class="friend-info">
                        <div class="friend-name">@f.FullName</div>
                        <div class="friend-last-msg">@f.LastMessage</div>
                    </div>
                    <div class="friend-meta">
                        <span class="friend-time">@f.LastTime</span>
                        <span class="friend-status @(f.IsOnline ? "online" : "offline")">
                            <i class="bi bi-circle-fill"></i>
                        </span>
                        <button class="btn-video-call" title="Gọi video" data-peer="@f.UserId" style="background:none;border:none;cursor:pointer;">
                            <i class="bi bi-camera-video" style="font-size:1.3em;color:#1e88e5;"></i>
                        </button>
                    </div>
                </li>
            }
        </ul>
    </div>

    <div class="chat-panel">
        <div class="chat-header">
            <div class="chat-title">
                <h2 id="chat-friend-name">Chọn bạn để bắt đầu trò chuyện</h2>
            </div>
            <div class="chat-actions">
                <i class="bi bi-search"></i>
                <i class="bi bi-three-dots-vertical"></i>
            </div>
        </div>
        <div class="chat-content"></div>
        <div class="chat-input-bar">
            <input type="text" placeholder="Nhập nội dung..."/>
            <div class="input-icons">
                <i class="bi bi-send"></i>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script src="~/js/chat-window.js"></script>
}